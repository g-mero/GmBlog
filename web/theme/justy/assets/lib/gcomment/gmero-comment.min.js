var Gcmt=function(e){"use strict";function t(...e){const t=document.createElement("div");return e.forEach((e=>{t.append(e)})),t}function n(e,t){setTimeout((()=>{t.classList.remove(e)}),10)}const s={htmlEncode(e){const t=document.createElement("div");t.innerText=e;return t.innerHTML},htmlDecode(e){const t=document.createElement("div");t.innerHTML=e;return t.innerText}};var a="g_842oa",c="g_aNpVd",l="g_cE3Sa",i="g_VHTaA",o="g_7vM0d",r="g_euFBP",d="g_jHpDE",u="g_Sz2JZ",m="g_NfhWE",p="g_Etu85",v="g_vZa4r",g="g_naKjd",h="g_OPHmj",f="g_3y-zv",$="g_8p-B1",L="g_3Dglt",w="g_03nxY",E="g_JhGBm",_="g_-VZ2L",b="g_sLnBg",y="g_I5s6E",M="g_ixKBO",B="g_e2Fbm",T="g_jXdTc",H="g_IUZdQ",k="g_XPsRO",A="g_rGhB5",x="g_KqU7F",C="g_-C521",P="g_TCQdu";const z='<svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true">\n<path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>\n</svg>';function D(n,s=z,a="",c=!1){const l=document.createElement("textarea");l.setAttribute("placeholder","留下你的评论...");const i=document.createElement("button");function o(e){l.disabled=e,i.disabled=e}if(i.type="button",i.innerText="确定",i.classList.add(u),i.onclick=()=>{n(l.value)},c){const e=t(l,i);return e.classList.add(m),{element:e,setAvatar:()=>0,setAvatarBtn:()=>0,disable:o}}const r=document.createElement("div");r.style.position="relative",r.innerHTML='<span style="opacity: .34;font-size: .65rem;position:relative;top:-3px;cursor:pointer"><svg  width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" style="vertical-align: -0.06rem;">\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n  </svg> 免责声明</span>';const d=t(t(r),i);d.classList.add(v,p),d.onmousedown=e=>{e.preventDefault()},l.onfocus=()=>{l.setAttribute("placeholder","支持部分MD语法(如 链接,邮箱等),不支持html标签..."),d.classList.remove(p)},l.onblur=()=>{l.setAttribute("placeholder","留下你的评论..."),""===l.value&&d.classList.add(p)};const g=document.createElement("div");g.classList.add(h);const f=e(g,{content:"hello tippy",offset:[0,6],placement:"auto"});g.innerHTML=s||z,""!==a?f.setContent(a):f.disable();const $=t(l,d);$.style.width="100%";e(r,{offset:[0,6],placement:"auto",content:'<span style="font-size:.65rem">本评论组件会获取用户GitHub的基本信息（包括email）以保证评论及回复的有效性，当前版本0.0.1</span>',allowHTML:!0,trigger:"click",interactive:!0});const L=document.createElement("div");L.style.display="flex",L.append(t(g)),L.append($);return{element:L,setAvatar:function(e=z,t=""){g.innerHTML=e||z,""===t&&f.state.isEnabled?f.disable():""===t||f.state.isEnabled||f.enable(),f.setContent(t)},setAvatarBtn:function(e){g.onclick=void 0===e?null:e},disable:o}}const S=function(){const e=D((()=>0),"","",!0).element;e.classList.add(p);const t=e.querySelector("textarea"),s=e.querySelector("button");return{element:e,getValue:function(){return t.value},setPlaceholder:function(e){t.setAttribute("placeholder",e)},setPostBtn:function(e){s.onclick=e},hide:function(){e.classList.add(p)},show:function(){n(p,e)},clear:function(){t.value=""}}}(),q='<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em">\n<path \nd="M594.176 151.168a34.048 34.048 0 0 0-29.184 10.816c-11.264 13.184-15.872 24.064-21.504 40.064l-1.92 \n5.632c-5.632 16.128-12.8 36.864-27.648 63.232-25.408 44.928-50.304 74.432-86.208 97.024-23.04 14.528-43.648 \n26.368-65.024 32.576v419.648a4569.408 4569.408 0 0 0 339.072-4.672c38.72-2.048 72-21.12 88.96-52.032 \n21.504-39.36 47.168-95.744 63.552-163.008a782.72 782.72 0 0 0 22.528-163.008c0.448-16.832-13.44-32.256-35.328-32.256h-197.312a32 \n32 0 0 1-28.608-46.336l0.192-0.32 0.64-1.344 2.56-5.504c2.112-4.8 5.12-11.776 8.32-20.16 6.592-17.088 13.568-39.04 16.768-60.416 \n4.992-33.344 3.776-60.16-9.344-84.992-14.08-26.688-30.016-33.728-40.512-34.944zM691.84 341.12h149.568c52.736 0 100.864 40.192 \n99.328 98.048a845.888 845.888 0 0 1-24.32 176.384 742.336 742.336 0 0 1-69.632 178.56c-29.184 53.44-84.48 82.304-141.76 85.248-55.68 \n2.88-138.304 5.952-235.712 5.952-96 0-183.552-3.008-244.672-5.76-66.432-3.136-123.392-51.392-131.008-119.872a1380.672 1380.672 0 0 \n1-0.768-296.704c7.68-72.768 70.4-121.792 140.032-121.792h97.728c13.76 0 28.16-5.504 62.976-27.456 24.064-15.104 42.432-35.2 64.512-74.24 \n11.904-21.184 17.408-36.928 22.912-52.8l2.048-5.888c6.656-18.88 14.4-38.4 33.28-60.416a97.984 97.984 0 0 1 85.12-32.768c35.264 4.096 \n67.776 26.88 89.792 68.608 22.208 42.176 21.888 84.864 16 124.352a342.464 342.464 0 0 1-15.424 60.544z m-393.216 \n477.248V405.184H232.96c-40.448 0-72.448 27.712-76.352 64.512a1318.912 1318.912 0 0 0 0.64 282.88c3.904 34.752 32.96 \n61.248 70.4 62.976 20.8 0.96 44.8 1.92 71.04 2.816z" fill="#9499a0">\n</path></svg>';let O;const V=(e,t)=>{const n=document.createElement("div");n.classList.add(w),n.innerHTML=`<div class="${l}"><div class="${g}">\n                    <img src="${e.avatarUrl}">\n                </div>\n                <div class="${r}">\n                    <div class="${l}  ${i}"><div><span class="${E}">${e.nickname}</span>${""!==e.toUserNickname?`回复<span class="${_}">@${e.toUserNickname}</span>`:""}</div>\n                        <div class="comment-g-options"></div>\n                    </div>\n                    <div class="${b}">${function(e){let t=e;return t=s.htmlEncode(t),t=function(e){const t=/\[([^ ].+?)\]\((.+?)\)/gm;if(-1===e.search(t))return!1;const n=/^https?:\/\/([\w-]+\.)+[\w-]+(\/[\w\-./?%&=]*)?$/;return e.replace(t,((e,t,s)=>-1===s.search(n)?e:`<a href="${s}" target="_blank" rel="noopener noreferrer">${t}</a>`))}(t)||t,t=function(e){const t=/&lt;(.+?)&gt;/gm;if(-1===e.search(t))return!1;const n=/^https?:\/\/([\w-]+\.)+[\w-]+(\/[\w\-./?%&=]*)?$/,s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return e.replace(t,((e,t)=>-1!==t.search(n)?`<a href="${t}" target="_blank" rel="noopener noreferrer">${t}</a>`:-1!==t.search(s)?`<a href="mailto:${t}" target="_blank" rel="noopener noreferrer">${t}</a>`:e))}(t)||t,t}(e.content)}</div>\n                    <div class="${y} ${l}">\n                        <span> ${function(e){const t=new Date(e),n=new Date(Date.now());let s=n.getFullYear()-t.getFullYear();return s>0?`${s}年前`:(s=n.getMonth()-t.getMonth(),s>0?`${s}个月前`:(s=n.getDate()-t.getDate(),s>0?`${s}天前`:(s=n.getHours()-t.getHours(),s>0?`${s}小时前`:(s=n.getMinutes()-t.getMinutes(),s>0?`${s}分钟前`:(s=n.getSeconds()-t.getSeconds(),s>0?`${s}秒前`:"刚刚")))))}(e.createAt)} ${e.isEdited?"(修改过)":""}</span>\n                        <span class="${d} ${B}"><i class="${T}">${q}</i>${e.likes}</span>\n                        <span class="${d} ${M}">回复</span>\n                    </div>\n                </div></div>`;const a=n.querySelector(`.${M}`),c=n.querySelector(`.${B}`);if(null!==a&&null!==c){a.onclick=()=>{S.hide(),O!==a?(O=a,S.setPlaceholder(`回复@${e.nickname}`),S.setPostBtn((()=>{t(S.getValue(),e.toCommentID||e.id,e.toCommentID&&e.userID,n),S.clear()})),n.append(S.element),S.show()):O=null};let s=!1;c.onclick=()=>{s?(c.innerHTML=`<i class="${T}">${q}</i>${e.likes}`,s=!1):(c.innerHTML=`<i class="${T}"><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"><path \nd="M860.032 341.12h-182.08c7.488-17.408 14.72-38.528 18.048-60.544 5.952-39.872 \n4.992-87.36-18.368-129.088-21.76-38.848-50.304-60.928-83.52-61.376-30.72-0.384-53.888 18.176-65.728 33.408a199.296 199.296 0 0 \n0-32.064 59.264l-1.92 5.184c-5.44 14.976-10.88 29.952-23.04 51.456-19.712 34.816-48.832 56.128-77.696 74.368a391.936 391.936 0 0 \n1-30.976 17.92v552.448a4621.952 4621.952 0 0 0 351.872-5.312c51.264-2.752 100.672-28.544 127.488-76.032 24.32-43.136 55.168-108.16 \n74.368-187.264 20.416-84.16 24.64-152.704 24.576-195.968-0.128-46.336-38.72-78.4-80.96-78.4z m-561.344 541.312V341.12H215.808c-59.712 \n0-113.408 42.048-120.896 104.32a1376 1376 0 0 0 0.64 330.368c7.36 58.688 56.128 100.032 113.024 102.848 25.024 1.28 55.552 2.56 \n90.112 3.712z" fill="#00aeec"></path></svg></i>${e.likes+1}`,s=!0)}}return n},j=document.createElement("div");function I(e){return j.innerHTML=`<div class="${l}">评论<i class="${A}">${e}</i></div><div></div>`,j}j.classList.add(l,i,k);const U=document.createElement("div");U.classList.add(f);const F=function(){const e=document.createElement("div");return e.classList.add(x,o),{element:e,close:function(){e.classList.add(o),U.style.filter="blur(0)",S.hide()},show:function(){e.classList.remove(o),U.style.filter="blur(3px)"}}}(),N=document.createElement("div");function R(e,n,s,a,c,l){if(N.innerHTML="",U.innerHTML="",void 0===s||s.length<1||void 0===a||0===a)N.append(I(0),U,F.element);else{const i=[];s.forEach((n=>{i.push(((e,n)=>{const s=t(V(e,n));s.classList.add($);const a=document.createElement("div");if(a.classList.add(L),e.children.length>0){const t=[];e.children.forEach((e=>{t.push(V(e,n))})),a.append(...t)}return s.append(a),s})(n,e))})),U.append(...i),N.append(I(a),U,function(e,n,s){const a=document.createElement("ol"),c=n||1,l=Math.floor(1);function i(e,t=1){const n=[];for(let a=t;a<=e;a+=1){const e=document.createElement("li");e.innerText=a.toString(),c===a&&e.classList.add(P),e.onclick=()=>{s(a)},n.push(e)}return n}function o(){const e=document.createElement("li");return e.innerText="...",e}e<=7?a.append(...i(e)):c<5?a.append(...i(5),o(),...i(e,e)):c>e-5+1?a.append(...i(1),o(),...i(e,e-5+1)):a.append(...i(1),o(),...i(c+l,c-(3-l-1)),o(),...i(e,e));const r=t(a);return r.classList.add(C),r}(c||1,l||1,n),F.element)}return{element:N,loading:F}}N.style.position="relative";const G={elid:"gcomment",defaultAvatarHtml:"",avatarTippy:"",onDeleteBtn:()=>!1,onLikeBtn:()=>!1,onPagiClick:()=>!1,onPostBtn:()=>!1,onReplyPostBtn:()=>!1,onUpdateConfirmBtn:()=>!1};const Z={init(e){const s=G,l=function(e=G){let s=document.getElementById(e.elid);null===s&&(console.error("没有找到element"),s=document.createElement("div")),s.classList.add(a),s.innerHTML="";const l=D(e.onPostBtn,e.defaultAvatarHtml,e.avatarTippy);s.append(l.element);const i=R(e.onReplyPostBtn,e.onPagiClick,[],0);return s.append(i.element),{element:s,setAvatar:l.setAvatar,setAvatarBtn:l.setAvatarBtn,setComments:(t,n,s=1,a=1)=>{R(e.onReplyPostBtn,e.onPagiClick,t,n,s,a)},insertOneComment:(s,a,c)=>{var l;if(![1,2,3].includes(c))return;const o=V(s,e.onReplyPostBtn),{classList:r}=o;switch(r.add(H),c){case 1:{const e=i.element.children[1];if(null!==e){const s=document.createElement("div");s.classList.add(L);const a=t(o,s),c=e.querySelector(`i.${A}`);if(null!==c){const e=Number(c.innerHTML)+1;c.innerHTML=e.toString()}a.classList.add($),e.prepend(a),n(H,o)}break}case 2:null===(l=a.nextElementSibling)||void 0===l||l.prepend(o),n(H,o);break;case 3:a.after(o),n(H,o)}},loading:function(e){const t=document.createElement("div");t.classList.add(c),e?(null==s||s.prepend(t),i.loading.show(),l.disable(!0)):setTimeout((()=>{var e;null===(e=null==s?void 0:s.querySelector(`div.${c}`))||void 0===e||e.remove(),i.loading.close(),l.disable(!1)}),500)}}}(Object.assign(s,e));Object.assign(Z,l)},element:document.createElement("div"),setAvatar:()=>!1,setAvatarBtn:()=>!1,setComments:()=>!1,insertOneComment:()=>!1,loading:()=>!1};return Z}(tippy);
